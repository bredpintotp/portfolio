<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Astro – Portfolio Tiago Pinto</title>

  <style>
    :root { color-scheme: dark; }
    body {
      margin: 0;
      background: #000;
      color: #fff;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
    }
    nav { text-align: center; padding: 14px 10px; }
    nav a { color:#fff; text-decoration:none; margin:0 10px; opacity:.9 }
    nav a:hover { opacity:1; text-decoration:underline }
    header { text-align:center; padding: 8px 10px 0; }
    header h1 { margin: 6px 0 4px; font-size: 28px; }
    header p { margin: 0 0 10px; opacity:.8 }

    /* Grille propre et responsive des miniatures */
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 14px;
      padding: 18px;
      max-width: 1400px;
      margin: 0 auto 28px;
    }
    .card { display:block; border-radius:10px; overflow:hidden; background:#111; }
    .card img {
      width: 100%;
      height: 180px;            /* vignettes homogènes */
      object-fit: cover;        /* recadrage propre */
      display: block;
      background:#111;
      transition: transform .18s ease;
    }
    .card:hover img { transform: scale(1.03); }
    .sr-only { position:absolute; width:1px; height:1px; overflow:hidden; clip:rect(1px,1px,1px,1px); white-space:nowrap; }
  </style>
</head>
<body>

  <!-- Menu -->
  <nav>
    <a href="index.html">Accueil</a> |
    <a href="concerts.html">Concerts</a> |
    <a href="astro.html">Astro</a>
  </nav>

  <!-- Titre -->
  <header>
    <h1>Astro</h1>
    <p>Astrophotographie – Tiago Pinto</p>
  </header>

  <!-- Galerie -->
  <div id="gallery" class="gallery" aria-live="polite"></div>

  <script>
    /*
      Générateur de galerie qui supporte des extensions mélangées :
      essaie .jpg, .jpeg, .JPG, .png, .PNG pour chaque numéro.

      Prérequis :
      - Les fichiers sont nommés photo-1.jpg/.jpeg/.png, photo-2..., etc.
      - Même nom (numéro + extension) dans /thumbs et /fulls.
      - Dossiers à la racine du repo : /thumbs et /fulls
    */
    (function () {
      const container = document.getElementById('gallery');

      const TOTAL = 60;                    // ← Mets un plafond > nb réel de photos
      const exts  = ['jpg','jpeg','JPG','png','PNG'];  // extensions acceptées

      // Crée une tuile pour "photo-<n>.<ext>" en testant les extensions
      function addCard(n) {
        const article = document.createElement('a');
        article.className = 'card';
        article.href = '#';    // sera mis à jour quand la vignette charge
        const img = document.createElement('img');
        img.alt = `Photo ${n}`;

        // Pour accessibilité (le titre sous l’image est caché)
        const sr = document.createElement('span');
        sr.className = 'sr-only';
        sr.textContent = `Photo ${n}`;

        article.appendChild(img);
        article.appendChild(sr);
        container.appendChild(article);

        let i = 0;

        function tryNext() {
          if (i >= exts.length) {
            // Aucune extension ne marche → on retire la carte
            article.remove();
            return;
          }
          const ext = exts[i++];
          const thumbSrc = `thumbs/photo-${n}.${ext}`;
          const fullHref = `fulls/photo-${n}.${ext}`;

          // on met la miniature; si elle charge, on fixe le lien plein format
          img.onerror = tryNext;
          img.onload  = () => { article.href = fullHref; };
          img.src     = thumbSrc;
        }

        tryNext();
      }

      for (let n = 1; n <= TOTAL; n++) addCard(n);
    })();
  </script>

</body>
</html>
